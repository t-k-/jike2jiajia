<!DOCTYPE HTML>
<html>
<head>
</head>
<body style="background-color:gray;">
	<canvas id="canvas" width="500" height="300" style="border:1px solid #d3d3d3;">
		HTML5 not supported.
	</canvas>
<script type="text/javascript" charset="utf-8">

var ctx = document.getElementById('canvas').getContext("2d");
ctx.font = "15px Arial";

var img = new Image();
img.src = "jk.jpg";

img.onload = function () {
	setInterval(gameloop, 100);	
}

var fall_x = 1;

function drawPP(ctx, x, y) {
	ctx.beginPath();
	ctx.arc(x, y, 5, 0, 2*Math.PI);
	ctx.fillStyle = '#FF7F50';
	ctx.fill();
}

var magic_balls = [];

function Magicball(x, y, toX, toY) {
	var _this = this;

	(function() {
	 _this.x = x;
	 _this.y = y;
	 _this.toX = toX;
	 _this.toY = toY;
	 })();

	this.update = function(ctx) {
		_this.x += 1;
		_this.y -= 1;
		console.log("=" + _this.x + ', ' + _this.y);
		drawPP(ctx, _this.x, _this.y);
	}
};

var b = null;

function gameloop() {
	ctx.clearRect(0, 0, 500, 300);
	ctx.drawImage(img, 0, 180, 100, 150);
	// ctx.fillStyle = "red";
	// ctx.fillText("‚ù§", x, 50);

	drawPP(ctx, fall_x, fall_x * fall_x);

	if (fall_x + 1 < 15)
		fall_x += 1;
	else {
		fall_x = 16.2;
		var x0 = fall_x;
		var y0 = fall_x * fall_x;

		if (b == null)
			b = new Magicball(x0, y0, 0, 0);
		else
			b.update(ctx);
		//magic_balls.push(b);
	}
}
</script>

</body>
</html>
